<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>ROBLOXXED - Recommended</title>
<style>
  body {
    background: url('https://static.vecteezy.com/system/resources/previews/022/514/324/non_2x/white-gradient-abstract-curve-pattern-free-photo.jpeg') no-repeat center center fixed;
    background-size: cover;
    color: #003366;
    font-family: 'Segoe UI', sans-serif;
    margin: 0;
    padding: 20px;
    text-align: center;
  }
  .logo {
    max-width: 400px;
    margin-bottom: 20px;
  }
  nav {
    margin-bottom: 20px;
  }
  nav a {
    color: #004080;
    text-decoration: none;
    margin: 0 15px;
    font-weight: bold;
    font-size: 1.1em;
  }
  nav a:hover {
    text-decoration: underline;
  }
  #searchBar {
    padding: 10px;
    width: 300px;
    font-size: 16px;
    border-radius: 5px;
    border: 2px solid #0066cc;
    margin-bottom: 15px;
    color: #003366;
  }
  #refreshBtn {
    background-color: #0073e6;
    color: white;
    border: none;
    padding: 8px 15px;
    font-weight: bold;
    border-radius: 5px;
    cursor: pointer;
    margin-bottom: 30px;
  }
  #refreshBtn:hover {
    background-color: #005bb5;
  }
  .games-container {
    display: grid;
    grid-template-columns: repeat(auto-fill,minmax(250px,1fr));
    gap: 20px;
    justify-items: center;
  }
  .game {
    background-color: #e6f0ff;
    border: 2px solid #0073e6;
    border-radius: 10px;
    padding: 15px;
    width: 250px;
    box-sizing: border-box;
    text-align: center;
    color: #003366;
  }
  .game img {
    width: 100%;
    border-radius: 5px;
    border: 1px solid #0073e6;
  }
  .game h2 {
    margin: 10px 0 5px 0;
    font-size: 1.2em;
  }
  .game p {
    margin: 0 0 10px 0;
    font-weight: bold;
    color: #0059b3;
  }
  .game button {
    background-color: #0073e6;
    color: white;
    border: none;
    padding: 10px 20px;
    font-weight: bold;
    border-radius: 5px;
    cursor: pointer;
    transition: background-color 0.3s ease;
  }
  .game button:hover {
    background-color: #005bb5;
  }
  p.no-games {
    color: #004080;
    font-weight: bold;
    font-size: 1.2em;
  }
</style>
</head>
<body>
  <img src="robloxxed_logo.png" alt="ROBLOXXED Logo" class="logo" />

  <nav>
    <a href="index.html">Home</a>
    <a href="recommended.html">Recommended</a>
    <a href="charts.html">Charts</a>
    <a href="others.html">Others</a>
  </nav>

  <input
    type="text"
    id="searchBar"
    placeholder="Search games..."
    onkeyup="filterGames()"
  />
  <br />
  <button id="refreshBtn" onclick="generateAndStoreGames()">Refresh Games</button>

  <div class="games-container" id="gameList">
    Loading games...
  </div>

<script>
  const GAME_COUNT = 100000; // 100k games in memory
  const STORAGE_KEY = 'robloxxed_games';

  const nameKeywords = [
    "Adventure", "Simulator", "Tycoon", "Escape", "Quest", "Battle", "Island",
    "City", "Tower", "Run", "Fight", "Survival", "Parkour", "Race", "Defense",
    "Story", "World", "Craft", "Hero", "Magic", "Zoo", "Build", "Maze", "Kingdom"
  ];

  let allGames = [];

  function randomGameName() {
    const count = Math.floor(Math.random() * 3) + 1;
    const parts = [];
    for (let i = 0; i < count; i++) {
      const word = nameKeywords[Math.floor(Math.random() * nameKeywords.length)];
      parts.push(word);
    }
    return [...new Set(parts)]
      .map(word => word.charAt(0).toUpperCase() + word.slice(1))
      .join(' ');
  }

  function generateGames() {
    const placeholderThumbnail = "https://via.placeholder.com/150x150.png?text=Loading...";
    const games = [];
    for (let i = 0; i < GAME_COUNT; i++) {
      games.push({
        id: 1000000000 + i,
        name: randomGameName(),
        creator: `User${Math.floor(1000 + Math.random() * 9000)}`,
        thumbnail: placeholderThumbnail
      });
    }
    return games;
  }

  function saveGamesToStorage(games) {
    try {
      localStorage.setItem(STORAGE_KEY, JSON.stringify(games));
    } catch(e) {
      console.warn('LocalStorage quota exceeded or error saving data', e);
      // If storage fails, ignore and continue with runtime only
    }
  }

  function loadGamesFromStorage() {
    const data = localStorage.getItem(STORAGE_KEY);
    if (!data) return null;
    try {
      return JSON.parse(data);
    } catch {
      return null;
    }
  }

  function renderGames(games) {
    const container = document.getElementById('gameList');
    container.innerHTML = '';

    if (!games.length) {
      container.innerHTML = '<p class="no-games">No games found.</p>';
      return;
    }

    games.forEach(game => {
      const div = document.createElement('div');
      div.className = 'game';
      div.id = 'game-' + game.id;
      div.innerHTML = `
        <img src="${game.thumbnail}" alt="${game.name}" />
        <h2>${game.name}</h2>
        <p>By ${game.creator}</p>
        <button onclick="location.href='roblox://placeId=${game.id}'">Play</button>
      `;
      container.appendChild(div);
    });
  }

  function filterGames() {
    const query = document.getElementById('searchBar').value.toLowerCase().trim();

    if (!allGames.length) {
      document.getElementById('gameList').innerHTML = 'Loading games...';
      return;
    }

    if (!query) {
      renderGames(allGames.slice(0, 50));
      return;
    }

    const filtered = allGames.filter(game =>
      game.name.toLowerCase().includes(query) ||
      game.creator.toLowerCase().includes(query)
    );

    renderGames(filtered.slice(0, 50));
  }

  async function generateAndStoreGames() {
    allGames = generateGames();
    saveGamesToStorage(allGames);
    renderGames(allGames.slice(0, 50));
  }

  window.onload = async () => {
    const storedGames = loadGamesFromStorage();
    if (storedGames && storedGames.length === GAME_COUNT) {
      allGames = storedGames;
      renderGames(allGames.slice(0, 50));
    } else {
      await generateAndStoreGames();
    }
  };
</script>
</body>
</html>
